// ./commands/user/help.js
const fs = require('fs');

module.exports = {
  name: "help",
  aliases: ["commands"], // рдЕрдЧрд░ рдХреЛрдИ #commands рдпреВрдЬ рдХрд░реЗ
  execute(api, threadID, args, event, botState, isMaster) {
    try {
      // рдбрд╛рдпрдирд╛рдорд┐рдХрд▓реА рдХрдорд╛рдВрдбреНрд╕ рд▓реЛрдб рдХрд░реЗрдВ
      const commands = new Map();
      const commandFolders = ['admin', 'user', 'master'];
      for (const folder of commandFolders) {
        const commandFiles = fs.readdirSync(`./commands/${folder}`).filter(file => file.endsWith('.js'));
        for (const file of commandFiles) {
          try {
            const command = require(`../${folder}/${file}`);
            commands.set(command.name, command);
            if (command.aliases) {
              command.aliases.forEach(alias => commands.set(alias, command));
            }
          } catch (err) {
            console.error(`[ERROR] Failed to load command ${file} from ${folder}:`, err.message);
          }
        }
      }

      const prefix = botState.sessions[event.threadID]?.prefix || '#';
      const helpText = `
ЁЯЫая╕П ЁЭЧХЁЭЧвЁЭЧз ЁЭЧЦЁЭЧвЁЭЧаЁЭЧаЁЭЧФЁЭЧбЁЭЧЧЁЭЧж ЁЭЧаЁЭЧШЁЭЧбЁЭЧи
тФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБ
ЁЯФТ ЁЭЧФЁЭЧ▒ЁЭЧ║ЁЭЧ╢ЁЭЧ╗ ЁЭЧЦЁЭЧ╝ЁЭЧ║ЁЭЧ║ЁЭЧоЁЭЧ╗ЁЭЧ▒ЁЭША (рдХреЗрд╡рд▓ рдорд╛рд╕реНрдЯрд░/рдПрдбрдорд┐рди)
тАв ${prefix}groupnamelock on/off <name> - рдЧреНрд░реБрдк рдХрд╛ рдирд╛рдо рд▓реЙрдХ/рдЕрдирд▓реЙрдХ рдХрд░реЗрдВ
тАв ${prefix}nicknamelock on/off <nickname> - рд╕рднреА рдореЗрдВрдмрд░реНрд╕ рдХрд╛ рдирд┐рдХрдиреЗрдо рд▓реЙрдХ/рдЕрдирд▓реЙрдХ рдХрд░реЗрдВ
тАв ${prefix}antiout on/off - Anti-out рдлреАрдЪрд░ рдЪрд╛рд▓реВ/рдмрдВрдж рдХрд░реЗрдВ
тАв ${prefix}kickout @user - рдпреВрдЬрд░ рдХреЛ рдЧреНрд░реБрдк рд╕реЗ рдирд┐рдХрд╛рд▓реЗрдВ
тАв ${prefix}unsend - рд░рд┐рдкреНрд▓рд╛рдИ рдХрд┐рдП рдореИрд╕реЗрдЬ рдХреЛ рдбрд┐рд▓реАрдЯ рдХрд░реЗрдВ
тАв ${prefix}send sticker start/stop - рд╕реНрдЯрд┐рдХрд░ рд╕реНрдкреИрдо рд╢реБрд░реВ/рдмрдВрдж рдХрд░реЗрдВ (рдПрд▓рд┐рдпрд╛рд╕: ${prefix}stickerspam)
тАв ${prefix}autospam accept - рдСрдЯреЛ рд╕реНрдкреИрдо рдореИрд╕реЗрдЬреЗрд╕ рд╕реНрд╡реАрдХрд╛рд░ рдХрд░реЗрдВ
тАв ${prefix}automessage accept - рдСрдЯреЛ рдореИрд╕реЗрдЬ рд░рд┐рдХреНрд╡реЗрд╕реНрдЯреНрд╕ рд╕реНрд╡реАрдХрд╛рд░ рдХрд░реЗрдВ
тАв ${prefix}loder target on @user - рдпреВрдЬрд░ рдХреЛ рдЯрд╛рд░рдЧреЗрдЯ рдХрд░реЗрдВ (рд╣рд░ 2 рдорд┐рдирдЯ рдореЗрдВ рдЧрд╛рд▓рд┐рдпрд╛рдВ)
тАв ${prefix}loder stop - рдЯрд╛рд░рдЧреЗрдЯрд┐рдВрдЧ рдмрдВрдж рдХрд░реЗрдВ
тАв ${prefix}autoconvo on/off - рдСрдЯреЛ рдХрдиреНрд╡рд░реНрд╕реЗрд╢рди рдЪрд╛рд▓реВ/рдмрдВрдж рдХрд░реЗрдВ
тАв ${prefix}learn (trigger) {response} - рдмреЙрдЯ рдХреЛ рдирдпрд╛ рдЯреНрд░рд┐рдЧрд░-рд░рд┐рд╕реНрдкреЙрдиреНрд╕ рд╕рд┐рдЦрд╛рдПрдВ

ЁЯЖФ ЁЭЧиЁЭШАЁЭЧ▓ЁЭЧ┐ ЁЭЧЦЁЭЧ╝ЁЭЧ║ЁЭЧ║ЁЭЧоЁЭЧ╗ЁЭЧ▒ЁЭША (рд╕рднреА рдХреЗ рд▓рд┐рдП)
тАв ${prefix}tid - рдЧреНрд░реБрдк рдХрд╛ ID рдФрд░ рдирд╛рдо рджрд┐рдЦрд╛рдПрдВ
тАв ${prefix}uid - рдЕрдкрдирд╛ ID рджрд┐рдЦрд╛рдПрдВ
тАв ${prefix}uid @mention - рдореЗрдВрд╢рди рдХрд┐рдП рдпреВрдЬрд░ рдХрд╛ ID рджрд┐рдЦрд╛рдПрдВ
тАв ${prefix}info @mention - рдпреВрдЬрд░ рдХреА рдЬрд╛рдирдХрд╛рд░реА рджрд┐рдЦрд╛рдПрдВ
тАв ${prefix}groupinfo - рдЧреНрд░реБрдк рдХреА рдбрд┐рдЯреЗрд▓реНрд╕ рджрд┐рдЦрд╛рдПрдВ (рдПрд▓рд┐рдпрд╛рд╕: ${prefix}group info)
тАв ${prefix}pair - рджреЛ рд░реИрдВрдбрдо рдореЗрдВрдмрд░реНрд╕ рдХреЛ рдкреЗрдпрд░ рдХрд░реЗрдВ
тАв ${prefix}music <song name> - YouTube рд╕реЗ рдЧрд╛рдирд╛ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ
тАв ${prefix}help - рд╕рднреА рдХрдорд╛рдВрдбреНрд╕ рдХреА рд▓рд┐рд╕реНрдЯ рджрд┐рдЦрд╛рдПрдВ (рдПрд▓рд┐рдпрд╛рд╕: ${prefix}commands)

ЁЯСС я┐╜_MЁЭЧоЁЭШАЁЭШБЁЭЧ▓ЁЭЧ┐ ЁЭЧЦЁЭЧ╝ЁЭЧ║ЁЭЧ║ЁЭЧоЁЭЧ╗ЁЭЧ▒ЁЭША (рдХреЗрд╡рд▓ рдорд╛рд╕реНрдЯрд░)
тАв ${prefix}stopall - рд╕рд╛рд░реЗ рдмреЙрдЯреНрд╕ рдмрдВрдж рдХрд░реЗрдВ
тАв ${prefix}status - рдПрдХреНрдЯрд┐рд╡ рдмреЙрдЯреНрд╕ рдХреА рд╕рдВрдЦреНрдпрд╛ рджрд┐рдЦрд╛рдПрдВ
тАв ${prefix}removeadmin <@user/uid> - рдПрдбрдорд┐рди рд╣рдЯрд╛рдПрдВ
тАв ${prefix}masterid - рдорд╛рд╕реНрдЯрд░ рдХрд╛ рдкреНрд░реЛрдлрд╛рдЗрд▓ рд▓рд┐рдВрдХ рджрд┐рдЦрд╛рдПрдВ
тАв ${prefix}mastercommand - рдорд╛рд╕реНрдЯрд░ рдХрдорд╛рдВрдбреНрд╕ рдХреА рд▓рд┐рд╕реНрдЯ рджрд┐рдЦрд╛рдПрдВ
тАв ${prefix}listadmins - рд╕рднреА рдПрдбрдорд┐рдиреНрд╕ рдХреА рд▓рд┐рд╕реНрдЯ рджрд┐рдЦрд╛рдПрдВ
тАв ${prefix}list - рдПрдХреНрдЯрд┐рд╡ рдпреВрдЬрд░ IDs рджрд┐рдЦрд╛рдПрдВ
тАв ${prefix}kick <userId> - рдЦрд╛рд╕ рдпреВрдЬрд░ рдХрд╛ рдмреЙрдЯ рдмрдВрдж рдХрд░реЗрдВ
тАв ${prefix}addadmin <@user/uid> - рдирдпрд╛ рдПрдбрдорд┐рди рдЬреЛрдбрд╝реЗрдВ
тФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБ
ЁЯСС ЁЭЧЦЁЭЧ┐ЁЭЧ▓ЁЭЧоЁЭШБЁЭЧ▓ЁЭЧ▒ ЁЭЧХЁЭШЖ: тЬ╢тЩбтд╛тЮЭSHALENDER X..тд╣тЬ╢тЮ║ЁЯк┐ЁЯлиЁЯй╖ЁЯк╜
ЁЯУМ рдиреЛрдЯ: рдХреБрдЫ рдХрдорд╛рдВрдбреНрд╕ рдХреЗ рд▓рд┐рдП рдмреЙрдЯ рдХреЛ рдЧреНрд░реБрдк рдореЗрдВ рдПрдбрдорд┐рди рдкрд░рдорд┐рд╢рдиреНрд╕ рдЪрд╛рд╣рд┐рдПред
      `;
      api.sendMessage(helpText, threadID);
    } catch (e) {
      console.error('[ERROR] help command error:', e.message);
      api.sendMessage('тЪая╕П Help рдХрдорд╛рдВрдб рдореЗрдВ рдЧрд▓рддреАред', threadID);
    }
  }
};
